!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,a(e,t,"get"))}function n(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,a(e,t,"set"),n),n}function a(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function r(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var c=new WeakMap,i=new WeakMap,o=new WeakMap,l=new WeakMap,s=new WeakMap,u=new WeakMap,p=new WeakMap,g=function(){function a(e){var g=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r(this,c,{writable:!0,value:""}),r(this,i,{writable:!0,value:""}),r(this,o,{writable:!0,value:0}),r(this,l,{writable:!0,value:"«"}),r(this,s,{writable:!0,value:"»"}),r(this,u,{writable:!0,value:{"1/2":"½","1/3":"⅓","1/4":"¼","1/5":"⅕","1/6":"⅙","1/8":"⅛","2/3":"⅔","2/5":"⅖","3/4":"¾","3/5":"⅗","3/8":"⅜","4/5":"⅘","5/6":"⅚","5/8":"⅝","7/8":"⅞"}}),r(this,p,{writable:!0,value:[{pattern:/ -(\d)/g,replace:" −$1"},{pattern:/(^|\n|\s|>)\-(\s)/g,replace:"$1—$2"},{pattern:/(?<![-!])-{2} /g,replace:function(){return n(g,o,+t(g,o)-1),"— "}},{pattern:/\u00a0{2,}|\u00a0 | \u00a0/g,replace:function(e){return n(g,o,t(g,o)-(e.length-1))," "}},{pattern:/(\d)\s?[-—]\s?(\d)/g,replace:function(e,a,r){return n(g,o,t(g,o)-(e.length-"".concat(a,"–").concat(r).length)),"".concat(a,"–").concat(r)}},{pattern:/\([cс]\)/gi,replace:function(){return n(g,o,t(g,o)-2),"©"}},{pattern:/\(r\)/gi,replace:function(){return n(g,o,t(g,o)-2),"®"}},{pattern:/\(tm\)/gi,replace:function(){return n(g,o,t(g,o)-3),"™"}},{pattern:/\(р\)/gi,replace:function(){return n(g,o,t(g,o)-2),"₽"}},{pattern:/(?<![.…])\.{3}/g,replace:function(){return n(g,o,t(g,o)-2),"…"}},{pattern:/…(\.+)/g,replace:function(e,a){return n(g,o,t(g,o)+2),"...".concat(a)}},{pattern:/(\d)[xх](\d)/gi,replace:"$1×$2"},{pattern:/\+\/\-/g,replace:function(){return n(g,o,t(g,o)-2),"±"}},{pattern:/\b([123457]\/[234568])\b/g,replace:function(e,a){return t(g,u)["".concat(a)]&&n(g,o,t(g,o)-2),t(g,u)["".concat(a)]?t(g,u)["".concat(a)]:"".concat(a)}},{pattern:new RegExp("([".concat(Object.values(t(this,u)).join(""),"])(\\d)"),"g"),replace:function(e,a,r){return n(g,o,t(g,o)+2),"".concat(Object.entries(t(g,u)).find((function(e){return e[1]===a}))[0]).concat(r)}},{pattern:/["»]([a-z0-9а-яё…])/gi,replace:"".concat(t(this,l),"$1")},{pattern:/([a-z0-9а-яё…?!])["«]/gi,replace:"$1".concat(t(this,s))},{pattern:new RegExp('"('.concat(t(this,l),"[a-zа-яё0-9…])"),"ig"),replace:"".concat(t(this,l),"$1")},{pattern:new RegExp("([a-zа-яё0-9…?!]".concat(t(this,s),')"'),"ig"),replace:"$1".concat(t(this,s))},{pattern:new RegExp("([-a-z0-9]+=)[".concat(t(this,l)).concat(t(this,s),"]([^").concat(t(this,l)).concat(t(this,s),"]*?)"),"ig"),replace:'$1"$2'},{pattern:new RegExp('([-a-z0-9]+=)["]([^>'.concat(t(this,l)).concat(t(this,s),"]*?)[").concat(t(this,l)).concat(t(this,s),"]"),"ig"),replace:'$1"$2"'},{pattern:/\b'([std]|ve|ll|clock)\b/gi,replace:"’$1"},{pattern:new RegExp("([0-6]?[0-9])['′]([0-6]?[0-9])?(\\d+)[".concat(t(this,s),'"]'),"g"),replace:"$1′$2$3″"},{pattern:/((?:^|\n|\t|[\u00a0 ]|>)[a-zа-яё]{1,2}) /gi,replace:"$1 "},{pattern:/\-(то|ка)\u00a0/gi,replace:"-$1 "},{pattern:/(?:\s|\t|[\u00a0 ])(же?|л[иь]|бы?|ка)([.,!?:;])?\u00a0/gi,replace:" $1$2 "}]}),this._element=e,this._isContentEditable=!0===this._element.contentEditable}var g,h,f;return g=a,(h=[{key:"result",get:function(){return t(this,i)}},{key:"process",value:function(){var e=this;n(this,i,this._element.value),this._getCaretPosition(),t(this,p).forEach((function(a){n(e,i,t(e,i).replace(a.pattern,a.replace))})),this._element.value=t(this,i),this._setCaretPosition(t(this,o))}},{key:"_getSelectionText",value:function(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection?document.selection.createRange().text:void 0}},{key:"_getCaretPosition",value:function(){if(this._isContentEditable){this._element.focus();var e=document.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(this._element),t.setEnd(_rang.endContainer,e.endOffset),t.toString().length}n(this,o,this._element.selectionStart)}},{key:"_setCaretPosition",value:function(e){if(this._isContentEditable)return this._element.focus(),void document.getSelection().collapse(this._element,e);this._element.setSelectionRange(e,e)}}])&&e(g.prototype,h),f&&e(g,f),a}(),h=document.querySelector("#typograf"),f=document.querySelector("#highLight");h.addEventListener("keyup",(function(){f.innerHTML="<p>".concat(h.value.replace(/\u00a0/g,'<span class="hlg">&nbsp;</span>').replace(/([…©®™₽×—–„“«»″′½⅓¼⅕⅙⅛⅔⅖¾⅗⅜⅘⅚⅝⅞])/g,'<span class="hlb">$1</span>').replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"<br />"),"</p>")}));var d=new g(h);h.addEventListener("input",(function(){d.process()}))}();