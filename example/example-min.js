!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,a(e,t,"get"))}function n(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,a(e,t,"set"),n),n}function a(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function r(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function c(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(e,t,n){c(e,t),t.set(e,n)}function l(e,t){c(e,t),t.add(e)}var o=new WeakMap,s=new WeakMap,p=new WeakMap,u=new WeakMap,h=new WeakMap,g=new WeakMap,f=new WeakMap,w=new WeakMap,d=new WeakSet,v=new WeakSet,b=new WeakSet,m=new WeakSet,E=function(){function a(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l(this,m),l(this,b),l(this,v),l(this,d),i(this,o,{writable:!0,value:""}),i(this,s,{writable:!0,value:""}),i(this,p,{writable:!0,value:0}),i(this,u,{writable:!0,value:"«"}),i(this,h,{writable:!0,value:"»"}),i(this,g,{writable:!0,value:{"1/2":"½","1/3":"⅓","1/4":"¼","1/5":"⅕","1/6":"⅙","1/8":"⅛","2/3":"⅔","2/5":"⅖","3/4":"¾","3/5":"⅗","3/8":"⅜","4/5":"⅘","5/6":"⅚","5/8":"⅝","7/8":"⅞"}}),i(this,f,{writable:!0,value:[{pattern:/[\u00A0\u202F]+/g,replace:" "},{pattern:/[−–]/g,replace:"-"}]}),i(this,w,{writable:!0,value:[{pattern:/(?<= |^)[—-](\d)/g,replace:"−$1"},{pattern:/(?<![!])--(?!>)/g,replace:function(){return n(r,p,+t(r,p)-1),"—"}},{pattern:/(?<= |^|>|[^-!а-яёa-z])-(?= |$|[^->])/gm,replace:"—"},{pattern:/(?<!^|[:;.!?…,])([ ]+)—/gm,replace:function(e,a){return n(r,p,t(r,p)-(a.length?a.length-1:0))," —"}},{pattern:/([ ]+)—([ ]*?)([a-zа-яё0-9])/gim,replace:function(e,a,c,i){return console.log(1,t(r,p)),n(r,p,t(r,p)-((a.length?a.length-1:0)+(c.length?c.length-1:0))),console.log(2,t(r,p))," — ".concat(i)}},{pattern:/\u00A0 | \u00A0/g,replace:"  "},{pattern:/(\d)\s?[-—]\s?(\d)/g,replace:function(e,a,c){return n(r,p,t(r,p)-(e.length-"".concat(a,"–").concat(c).length)),"".concat(a,"–").concat(c)}},{pattern:/\([cс]\)/gi,replace:function(){return n(r,p,t(r,p)-2),"©"}},{pattern:/\(r\)/gi,replace:function(){return n(r,p,t(r,p)-2),"®"}},{pattern:/\(tm\)/gi,replace:function(){return n(r,p,t(r,p)-3),"™"}},{pattern:/\(р\)/gi,replace:function(){return n(r,p,t(r,p)-2),"₽"}},{pattern:/(?<![.…])\.{3}/g,replace:function(){return n(r,p,t(r,p)-2),"…"}},{pattern:/…(\.+)/g,replace:function(e,a){return n(r,p,t(r,p)+2),"...".concat(a)}},{pattern:/(\d)[xх](\d)/gi,replace:"$1×$2"},{pattern:/\+\/\-/g,replace:function(){return n(r,p,t(r,p)-2),"±"}},{pattern:/\b([123457]\/[234568])\b/g,replace:function(e,a){return t(r,g)["".concat(a)]&&n(r,p,t(r,p)-2),t(r,g)["".concat(a)]?t(r,g)["".concat(a)]:"".concat(a)}},{pattern:new RegExp("([".concat(Object.values(t(this,g)).join(""),"])(\\d)"),"g"),replace:function(e,a,c){return n(r,p,t(r,p)+2),"".concat(Object.entries(t(r,g)).find((function(e){return e[1]===a}))[0]).concat(c)}},{pattern:/["»]([a-z0-9а-яё…])/gi,replace:"".concat(t(this,u),"$1")},{pattern:/([a-z0-9а-яё…?!])["«]/gi,replace:"$1".concat(t(this,h))},{pattern:new RegExp('"('.concat(t(this,u),"[a-zа-яё0-9…])"),"ig"),replace:"".concat(t(this,u),"$1")},{pattern:new RegExp("([a-zа-яё0-9…?!]".concat(t(this,h),')"'),"ig"),replace:"$1".concat(t(this,h))},{pattern:new RegExp("([-a-z0-9]+=)[".concat(t(this,u)).concat(t(this,h),"]([^").concat(t(this,u)).concat(t(this,h),"]*?)"),"ig"),replace:'$1"$2'},{pattern:new RegExp('([-a-z0-9]+=)["]([^>'.concat(t(this,u)).concat(t(this,h),"]*?)[").concat(t(this,u)).concat(t(this,h),"]"),"ig"),replace:'$1"$2"'},{pattern:/\b'([std]|ve|ll|clock)\b/gi,replace:"’$1"},{pattern:new RegExp("([0-6]?[0-9])['′]([0-6]?[0-9])?(\\d+)[".concat(t(this,h),'"]'),"g"),replace:"$1′$2$3″"},{pattern:/((?:[ \u00A0]|>|^|\t)[a-zа-яё]{1,2}) /gim,replace:"$1 "},{pattern:/-(то|ка)\u00A0/gi,replace:"-$1 "},{pattern:/(?:\s|\t|[\u00A0 ])(же?|л[иь]|бы?|ка)([.,!?:;])?\u00A0/gi,replace:" $1$2 "}]}),this._element=e,this._isContentEditable=!0===this._element.contentEditable}var c,E,W;return c=a,(E=[{key:"result",get:function(){return t(this,s)}},{key:"process",value:function(){n(this,s,this._element.value),r(this,d,k).call(this,t(this,f)),r(this,b,y).call(this),r(this,d,k).call(this,t(this,w)),this._element.value=t(this,s),r(this,m,_).call(this,t(this,p))}}])&&e(c.prototype,E),W&&e(c,W),a}();function k(e){var a=this;e.forEach((function(e){n(a,s,t(a,s).replace(e.pattern,e.replace))}))}function y(){if(this._isContentEditable){this._element.focus();var e=document.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(this._element),t.setEnd(_rang.endContainer,e.endOffset),t.toString().length}n(this,p,this._element.selectionStart)}function _(e){if(this._isContentEditable)return this._element.focus(),void document.getSelection().collapse(this._element,e);this._element.setSelectionRange(e,e)}var W=document.querySelector("#typograf"),S=document.querySelector("#highLight");W.addEventListener("keyup",(function(){S.innerHTML="<p>".concat(W.value.replace(/\u00a0/g,'<span class="hlg">&nbsp;</span>').replace(/([…©®™₽×—–„“«»″′’½⅓¼⅕⅙⅛⅔⅖¾⅗⅜⅘⅚⅝⅞])/g,'<span class="hlb">$1</span>').replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"<br />"),"</p>")}));var z=new E(W);W.addEventListener("input",(function(){z.process()}))}();